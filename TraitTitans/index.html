<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trait Titans - Blockchain RPG</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container-fluid">
        <!-- Header -->
        <header class="header">
            <div class="d-flex justify-content-between align-items-center">
                <h1 class="game-title">
                    <i class="fas fa-shield-alt"></i>
                    Trait Titans
                </h1>
                <div class="wallet-section">
                    <button id="walletBtn" class="btn btn-primary">
                        <i class="fas fa-wallet"></i>
                        Connect Wallet
                    </button>
                    <div id="walletInfo" class="wallet-info d-none">
                        <span id="walletAddress">Not Connected</span>
                        <button id="disconnectBtn" class="btn btn-sm btn-outline-danger ms-2">
                            <i class="fas fa-sign-out-alt"></i>
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Game Area -->
        <main class="main-content">
            <div class="row">
                <!-- Player Stats Panel -->
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="card stat-card">
                        <div class="card-header">
                            <h5><i class="fas fa-user-ninja"></i> Player Stats</h5>
                        </div>
                        <div class="card-body">
                            <div class="stat-item">
                                <div class="stat-label">
                                    <i class="fas fa-fist-raised text-danger"></i>
                                    Strength
                                </div>
                                <div class="stat-value">
                                    <span id="strengthValue">0</span>
                                    <div class="progress">
                                        <div id="strengthBar" class="progress-bar bg-danger" style="width: 0%"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">
                                    <i class="fas fa-bolt text-warning"></i>
                                    Speed
                                </div>
                                <div class="stat-value">
                                    <span id="speedValue">0</span>
                                    <div class="progress">
                                        <div id="speedBar" class="progress-bar bg-warning" style="width: 0%"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">
                                    <i class="fas fa-brain text-info"></i>
                                    Wisdom
                                </div>
                                <div class="stat-value">
                                    <span id="wisdomValue">0</span>
                                    <div class="progress">
                                        <div id="wisdomBar" class="progress-bar bg-info" style="width: 0%"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">
                                    <i class="fas fa-star text-success"></i>
                                    Reputation
                                </div>
                                <div class="stat-value">
                                    <span id="reputationValue">0</span>
                                    <div class="progress">
                                        <div id="reputationBar" class="progress-bar bg-success" style="width: 0%"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">
                                    <i class="fas fa-heart text-danger"></i>
                                    Health
                                </div>
                                <div class="stat-value">
                                    <span id="healthValue">100</span>/100
                                    <div class="progress">
                                        <div id="healthBar" class="progress-bar bg-danger" style="width: 100%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Missions Panel -->
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="card mission-card">
                        <div class="card-header">
                            <h5><i class="fas fa-tasks"></i> Available Missions</h5>
                        </div>
                        <div class="card-body">
                            <div id="missionsList" class="missions-list">
                                <!-- Missions will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Battle Panel -->
                <div class="col-lg-4 col-md-12 mb-4">
                    <div class="card battle-card">
                        <div class="card-header">
                            <h5><i class="fas fa-sword"></i> Battle Arena</h5>
                        </div>
                        <div class="card-body">
                            <div id="battleArea" class="battle-area">
                                <div class="battle-info">
                                    <p>Find an opponent and test your skills!</p>
                                    <button id="findOpponentBtn" class="btn btn-danger btn-lg">
                                        <i class="fas fa-search"></i>
                                        Find Opponent
                                    </button>
                                </div>
                                <div id="battleInterface" class="battle-interface d-none">
                                    <div id="battleVisualization" class="battle-visualization mb-3">
                                        <!-- 3D battle arena will be rendered here -->
                                    </div>
                                    <div class="opponent-info">
                                        <h6>Opponent: <span id="opponentName">Unknown</span></h6>
                                        <div class="opponent-stats">
                                            <small>STR: <span id="opponentStrength">0</span></small>
                                            <small>SPD: <span id="opponentSpeed">0</span></small>
                                            <small>WIS: <span id="opponentWisdom">0</span></small>
                                        </div>
                                        <div class="progress mb-2">
                                            <div id="opponentHealthBar" class="progress-bar bg-danger" style="width: 100%"></div>
                                        </div>
                                        <small>Health: <span id="opponentHealth">100</span>/100</small>
                                    </div>
                                    <div class="battle-actions">
                                        <button id="attackBtn" class="btn btn-danger">
                                            <i class="fas fa-sword"></i>
                                            Attack
                                        </button>
                                        <button id="defendBtn" class="btn btn-primary">
                                            <i class="fas fa-shield"></i>
                                            Defend
                                        </button>
                                        <button id="skillBtn" class="btn btn-warning">
                                            <i class="fas fa-magic"></i>
                                            Skill
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- New Advanced Features Row -->
            <div class="row">
                <!-- PvP Duel Section -->
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="card">
                        <div class="card-header">
                            <h5><i class="fas fa-users"></i> PvP Battles</h5>
                        </div>
                        <div class="card-body" id="duel-section">
                            <div class="mb-3">
                                <label for="opponentWallet" class="form-label">Opponent Wallet Address:</label>
                                <input type="text" class="form-control" id="opponentWallet" 
                                       placeholder="Enter opponent's wallet address">
                            </div>
                            <button id="challengeBtn" class="btn btn-primary btn-block">
                                <i class="fas fa-sword-crossed"></i>
                                Challenge Player
                            </button>
                            <div id="pvp-battle-animation" class="battle-animation-container mt-3" style="display: none;">
                                <!-- Battle animation will be rendered here -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Global Leaderboard -->
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="card">
                        <div class="card-header">
                            <h5><i class="fas fa-trophy"></i> Global Leaderboard</h5>
                            <small class="text-muted">Updated every 60s</small>
                        </div>
                        <div class="card-body" id="leaderboard">
                            <div class="table-responsive">
                                <table class="table table-sm table-hover">
                                    <thead>
                                        <tr>
                                            <th>Rank</th>
                                            <th>Player</th>
                                            <th>Total XP</th>
                                        </tr>
                                    </thead>
                                    <tbody id="leaderboard-body">
                                        <tr>
                                            <td colspan="3" class="text-center text-muted">
                                                <div class="spinner-border spinner-border-sm me-2"></div>
                                                Loading leaderboard...
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Daily Missions + Streaks -->
                <div class="col-lg-4 col-md-12 mb-4">
                    <div class="card">
                        <div class="card-header">
                            <h5><i class="fas fa-calendar-check"></i> Daily Missions</h5>
                            <div id="streak-info" class="small">
                                <span class="badge bg-warning text-dark">
                                    <i class="fas fa-fire"></i>
                                    <span id="streak-count">0</span> day streak
                                </span>
                            </div>
                        </div>
                        <div class="card-body" id="daily-missions">
                            <div id="missions-list">
                                <div class="text-center text-muted">
                                    <div class="spinner-border spinner-border-sm me-2"></div>
                                    Loading daily missions...
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Battle Log -->
            <div class="row">
                <div class="col-12">
                    <div class="card battle-log-card">
                        <div class="card-header">
                            <h5><i class="fas fa-scroll"></i> Battle Log</h5>
                            <button id="clearLogBtn" class="btn btn-sm btn-outline-secondary">
                                <i class="fas fa-trash"></i>
                                Clear
                            </button>
                        </div>
                        <div class="card-body">
                            <div id="battleLog" class="battle-log">
                                <p class="text-muted">No battles yet. Start your first mission or find an opponent!</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Loading Modal -->
    <div id="loadingModal" class="modal fade" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-body text-center">
                    <div class="spinner-border text-primary" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                    <p class="mt-2">Processing transaction...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>
    <script src="https://unpkg.com/@solana/wallet-adapter-base@latest/lib/index.iife.min.js"></script>
    <script src="https://unpkg.com/@solana/wallet-adapter-phantom@latest/lib/index.iife.min.js"></script>
    <script src="https://unpkg.com/@solana/wallet-adapter-solflare@latest/lib/index.iife.min.js"></script>
    <script src="https://unpkg.com/three@0.160.0/build/three.min.js"></script>
    <script src="lib/wallet.js"></script>
    <script src="lib/honeycomb.js"></script>
    <script src="lib/battle.js"></script>
    <script src="lib/visualization.js"></script>
    <script src="lib/pvp.js"></script>
    <script src="lib/leaderboard.js"></script>
    <script src="lib/verxio.js"></script>
    <script src="lib/animations.js"></script>
    <script src="main.js"></script>
</body>
</html>
